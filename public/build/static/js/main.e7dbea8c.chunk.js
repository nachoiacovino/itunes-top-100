(this.webpackJsonpalasco=this.webpackJsonpalasco||[]).push([[0],{56:function(e,t,r){},91:function(e,t,r){"use strict";r.r(t);var a=r(3),n=(r(56),r(57),r(1)),i=r.n(n),c=r(27),s=r.n(c),l=r(13),u=r(19),o=r(48),b=r(9),m=r(92),j=r(93),d=r(94),f=r(95),h=r(98),O=r(23),x=function(e){var t=e.children;return Object(a.jsx)(m.a,{children:t})};function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var y=n.createElement("g",{transform:"rotate(0 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"}))),v=n.createElement("g",{transform:"rotate(30 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"}))),E=n.createElement("g",{transform:"rotate(60 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}))),w=n.createElement("g",{transform:"rotate(90 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"}))),k=n.createElement("g",{transform:"rotate(120 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"}))),C=n.createElement("g",{transform:"rotate(150 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}))),N=n.createElement("g",{transform:"rotate(180 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"}))),T=n.createElement("g",{transform:"rotate(210 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"}))),S=n.createElement("g",{transform:"rotate(240 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}))),A=n.createElement("g",{transform:"rotate(270 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"}))),R=n.createElement("g",{transform:"rotate(300 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"}))),D=n.createElement("g",{transform:"rotate(330 50 50)"},n.createElement("rect",{x:47,y:24,rx:3,ry:6,width:6,height:12,fill:"#1d3f72"},n.createElement("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"})));function M(e,t){var r=e.title,a=e.titleId,i=g(e,["title","titleId"]);return n.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{margin:"auto",background:"rgb(255, 255, 255)",display:"block",shapeRendering:"auto"},width:"200px",height:"200px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",ref:t,"aria-labelledby":a},i),r?n.createElement("title",{id:a},r):null,y,v,E,w,k,C,N,T,S,A,R,D)}var L=n.forwardRef(M),_=(r.p,function(){return Object(a.jsx)(m.a,{children:Object(a.jsx)(L,{})})}),F="GET_ALBUMS_START",B="GET_ALBUMS_SUCCESS",I="GET_ALBUMS_FAIL",P="ADD_ALBUM_TO_FAVORITES",U="REMOVE_ALBUM_FROM_FAVORITES",V=function(){return{type:F}},G=function(e){return{type:P,payload:e}},J=function(e){return{type:U,payload:e}},X=function(){return Object(a.jsxs)(m.a,{className:"mt-3",children:[Object(a.jsx)("h1",{children:"Page not found"}),Object(a.jsx)(u.b,{to:"/",children:"Return to Albums"})]})},Y=function(){var e=Object(l.b)(),t=Object(b.f)(),r=Object(l.c)((function(e){return e.albums.albums.find((function(e){return e.id.attributes["im:id"]===t.id}))})),i=Object(l.c)((function(e){return e.albums.loading})),c=Object(l.c)((function(e){return e.albums.error})),s=function(t){var a=r.id.attributes["im:id"];"ADD"===t?e(G(a)):"REMOVE"===t&&e(J(a))};Object(n.useEffect)((function(){e(V())}),[e]);var u;return c?Object(a.jsx)(x,{children:c.message}):i?Object(a.jsx)(_,{}):r?Object(a.jsx)(m.a,{className:"mt-3",children:Object(a.jsxs)(j.a,{className:"p-1",children:[Object(a.jsx)(d.a,{className:"pb-3",xs:12,md:3,children:Object(a.jsx)(f.a,{fluid:!0,src:r["im:image"][2].label,rounded:!0,width:500})}),Object(a.jsxs)(d.a,{xs:12,md:9,children:[Object(a.jsx)("h1",{children:r["im:name"].label}),Object(a.jsx)("h3",{children:r["im:artist"].label}),Object(a.jsxs)("p",{className:"m-0",children:["Price: ",r["im:price"].label]}),Object(a.jsxs)("p",{className:"mt-0",children:["Release date: ",(u=r["im:releaseDate"].label,new Intl.DateTimeFormat("en-GB").format(new Date(u)))," "]}),Object(a.jsxs)("div",{className:"mb-4",children:[r.favorite?Object(a.jsx)(h.a,{onClick:function(){return s("REMOVE")},children:Object(a.jsx)(O.a,{})}):Object(a.jsx)(h.a,{onClick:function(){return s("ADD")},children:Object(a.jsx)(O.b,{})}),Object(a.jsx)(h.a,{className:"ml-2",children:Object(a.jsx)("a",{className:"text-white",href:r.link.attributes.href,target:"_blank",rel:"noreferrer",children:"Buy on iTunes"})})]}),Object(a.jsx)("p",{children:Object(a.jsx)("small",{children:r.rights.label})})]})]})}):Object(a.jsx)(X,{})},q=r(32),z=r(96),H=function(e){var t=e.album,r=Object(l.b)(),n=function(e){var a=t.id.attributes["im:id"];"ADD"===e?r(G(a)):"REMOVE"===e&&r(J(a))};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)(z.a,{className:"mb-1",children:[Object(a.jsx)("div",{className:"w-60 d-flex justify-content-center",children:Object(a.jsxs)("h5",{className:"p-3",children:[t.rank,"."]})}),Object(a.jsx)("img",{src:t["im:image"][0].label,width:64,height:64,className:"mr-3",alt:"Generic placeholder"}),Object(a.jsxs)(z.a.Body,{children:[Object(a.jsx)(u.b,{to:"/album/".concat(t.id.attributes["im:id"]),children:Object(a.jsx)("h5",{children:t["im:name"].label})}),Object(a.jsx)("p",{className:"mb-0",children:t["im:artist"].label})]}),t.favorite?Object(a.jsx)(h.a,{variant:"link",onClick:function(){return n("REMOVE")},children:Object(a.jsx)(O.a,{})}):Object(a.jsx)(h.a,{variant:"link",onClick:function(){return n("ADD")},children:Object(a.jsx)(O.b,{})})]})]})},K=r(97),Q=r(99),W=r(49),Z=function(e){var t=e.onSearchChange;return Object(a.jsxs)(K.a,{className:"mb-3",children:[Object(a.jsx)(K.a.Prepend,{children:Object(a.jsx)(K.a.Text,{children:Object(a.jsx)(W.a,{})})}),Object(a.jsx)(Q.a,{placeholder:"Filter","aria-label":"Filter",onChange:t})]})},$=function(){var e=Object(n.useState)(""),t=Object(q.a)(e,2),r=t[0],i=t[1],c=Object(n.useState)([]),s=Object(q.a)(c,2),u=s[0],o=s[1],b=Object(n.useState)(!1),f=Object(q.a)(b,2),O=f[0],p=f[1],g=Object(l.b)(),y=Object(l.c)((function(e){return e.albums.albums})),v=Object(l.c)((function(e){return e.albums.loading})),E=Object(l.c)((function(e){return e.albums.error}));return Object(n.useEffect)((function(){g(V())}),[g]),Object(n.useEffect)((function(){o(y.filter((function(e){return e["im:name"].label.toLowerCase().includes(r.toLowerCase())||e["im:artist"].label.toLowerCase().includes(r.toLowerCase())})))}),[y,r]),Object(n.useEffect)((function(){o(O?y.filter((function(e){return e.favorite})):y)}),[y,O]),E?Object(a.jsx)(x,{children:E.message}):v?Object(a.jsx)(_,{}):Object(a.jsxs)(m.a,{children:[Object(a.jsxs)(j.a,{className:"mt-3",children:[Object(a.jsx)(d.a,{children:Object(a.jsx)("h1",{children:"Albums"})}),Object(a.jsx)(d.a,{className:"d-flex align-items-center justify-content-end",children:O?Object(a.jsx)(h.a,{onClick:function(){return p(!1)},children:"See all"}):Object(a.jsx)(h.a,{onClick:function(){return p(!0)},children:"See favorites"})})]}),Object(a.jsx)("hr",{}),Object(a.jsx)(Z,{onSearchChange:function(e){return i(e.target.value)}}),u.map((function(e){return Object(a.jsx)(H,{album:e},e.id.attributes["im:id"])}))]})},ee=function(){return Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{exact:!0,path:"/",component:$}),Object(a.jsx)(b.a,{exact:!0,path:"/album/:id",component:Y}),Object(a.jsx)(b.a,{component:X})]})},te=r(15),re=(r(69),r(31)),ae=r(53),ne=r(50),ie=r.n(ne),ce=r(52),se=r(12),le={albums:[],favorites:[],loading:!0,error:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,r=t.type,a=t.payload;switch(r){case B:return Object(se.a)(Object(se.a)({},e),{},{albums:a.map((function(t,r){return Object(se.a)(Object(se.a)({},t),{},{rank:r+1,favorite:e.favorites.includes(t.id.attributes["im:id"])})})),error:null,loading:!1});case I:return Object(se.a)(Object(se.a)({},e),{},{error:a,loading:!1});case P:return Object(se.a)(Object(se.a)({},e),{},{favorites:[].concat(Object(ce.a)(e.favorites),[a]),albums:e.albums.map((function(e){return a===e.id.attributes["im:id"]?Object(se.a)(Object(se.a)({},e),{},{favorite:!0}):e}))});case U:return Object(se.a)(Object(se.a)({},e),{},{favorites:e.favorites.filter((function(e){return e!==a})),albums:e.albums.map((function(e){return a===e.id.attributes["im:id"]?Object(se.a)(Object(se.a)({},e),{},{favorite:!1}):e}))});default:return e}},oe={key:"root",storage:ie.a,whitelist:["albums"]},be=Object(te.c)({albums:ue}),me=Object(re.a)(oe,be),je=r(20),de=r.n(je),fe=r(21),he=r(51),Oe=r.n(he).a.create({baseURL:"https://itunes.apple.com/us/rss/"}),xe=de.a.mark(ge),pe=de.a.mark(ye);function ge(){var e;return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(fe.b)(Oe.get,"topalbums/limit=100/json");case 3:return e=t.sent,t.next=6,Object(fe.c)({type:B,payload:e.data.feed.entry});case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(fe.c)({type:I,payload:t.t0});case 12:case"end":return t.stop()}}),xe,null,[[0,8]])}function ye(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.d)(F,ge);case 2:case"end":return e.stop()}}),pe)}var ve=de.a.mark(Ee);function Ee(){return de.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fe.a)([Object(fe.b)(ye)]);case 2:case"end":return e.stop()}}),ve)}var we=Object(ae.a)(),ke=[we],Ce=Object(te.e)(me,te.a.apply(void 0,ke));we.run(Ee);var Ne=Object(re.b)(Ce),Te=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,100)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(l.a,{store:Ce,children:Object(a.jsx)(u.a,{children:Object(a.jsx)(o.a,{persistor:Ne,children:Object(a.jsx)(ee,{})})})})}),document.getElementById("root")),Te()}},[[91,1,2]]]);
//# sourceMappingURL=main.e7dbea8c.chunk.js.map